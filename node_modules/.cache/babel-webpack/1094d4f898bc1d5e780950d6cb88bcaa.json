{"ast":null,"code":"import _asyncToGenerator from \"/home/seo/Desktop/Parcial_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { HttpHeaders } from '@angular/common/http';\nimport { mainEndpoint } from './utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class HoursService {\n  constructor(_http) {\n    this._http = _http;\n    this.urlApiHour = mainEndpoint + '/stock-pwfe/personaHorarioAgenda';\n    this.hours = [];\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'usuario': 'usuario2'\n      })\n    };\n  }\n\n  newHourFromServer(h) {\n    return {\n      id: h.idEmpleado.idPersona,\n      day: h.dia,\n      hourOpen: h.horaAperturaCadena,\n      hourClose: h.horaCierreCadena,\n      interval: h.intervaloMinutos\n    };\n  }\n\n  newHourToSend(h) {\n    return {\n      idEmpleado: {\n        idPersona: h.id\n      },\n      dia: h.day,\n      horaAperturaCadena: h.hourOpen,\n      horaCierreCadena: h.hourClose,\n      intervaloMinutos: h.interval\n    };\n  }\n\n  getAllHours() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        lista\n      } = yield _this._http.get(_this.urlApiHour).toPromise();\n      const hours = lista.map(h => _this.newHourFromServer(h));\n      console.log('hours:', hours);\n      _this.hours = hours;\n      return hours;\n    })();\n  }\n\n  createHour(hour) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = yield _this2._http.post(_this2.urlApiHour, _this2.newHourToSend(hour), _this2.httpOptions).toPromise();\n      return _this2.newHourFromServer(result);\n    })();\n  }\n\n  editHour(hour) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3._http.put(_this3.urlApiHour, _this3.newHourToSend(hour)).toPromise();\n    })();\n  }\n\n}\n\nHoursService.ɵfac = function HoursService_Factory(t) {\n  return new (t || HoursService)(i0.ɵɵinject(i1.HttpClient));\n};\n\nHoursService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: HoursService,\n  factory: HoursService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["/home/seo/Desktop/Parcial_front/src/app/services/hours.service.ts"],"names":[],"mappings":";AACA,SAAqB,WAArB,QAAwC,sBAAxC;AAGA,SAAS,YAAT,QAA+C,SAA/C;;;AAMA,OAAM,MAAO,YAAP,CAAmB;AAWvB,EAAA,WAAA,CAAoB,KAApB,EAAqC;AAAjB,SAAA,KAAA,GAAA,KAAA;AAVZ,SAAA,UAAA,GAAa,YAAY,GAAG,kCAA5B;AACD,SAAA,KAAA,GAAoB,EAApB;AAEC,SAAA,WAAA,GAAuB;AAC7B,MAAA,OAAO,EAAE,IAAI,WAAJ,CAAgB;AACvB,wBAAiB,kBADM;AAEvB,mBAAW;AAFY,OAAhB;AADoB,KAAvB;AAOiC;;AAEjC,EAAA,iBAAiB,CAAC,CAAD,EAAO;AAC9B,WAAO;AACL,MAAA,EAAE,EAAE,CAAC,CAAC,UAAF,CAAa,SADZ;AAEL,MAAA,GAAG,EAAE,CAAC,CAAC,GAFF;AAGL,MAAA,QAAQ,EAAE,CAAC,CAAC,kBAHP;AAIL,MAAA,SAAS,EAAE,CAAC,CAAC,gBAJR;AAKL,MAAA,QAAQ,EAAE,CAAC,CAAC;AALP,KAAP;AAOD;;AACO,EAAA,aAAa,CAAC,CAAD,EAAO;AAC1B,WAAO;AACL,MAAA,UAAU,EAAC;AAAE,QAAA,SAAS,EAAE,CAAC,CAAC;AAAf,OADN;AAEL,MAAA,GAAG,EAAE,CAAC,CAAC,GAFF;AAGL,MAAA,kBAAkB,EAAE,CAAC,CAAC,QAHjB;AAIL,MAAA,gBAAgB,EAAE,CAAC,CAAC,SAJf;AAKL,MAAA,gBAAgB,EAAE,CAAC,CAAC;AALf,KAAP;AAOD;;AAEY,EAAA,WAAW,GAAA;AAAA;;AAAA;AACtB,YAAM;AAAE,QAAA;AAAF,gBAAkB,KAAI,CAAC,KAAL,CAAW,GAAX,CAAoB,KAAI,CAAC,UAAzB,EAAqC,SAArC,EAAxB;AACA,YAAM,KAAK,GAAE,KAAK,CAAC,GAAN,CAAW,CAAD,IAAY,KAAI,CAAC,iBAAL,CAAuB,CAAvB,CAAtB,CAAb;AAEA,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAsB,KAAtB;AACA,MAAA,KAAI,CAAC,KAAL,GAAa,KAAb;AACA,aAAO,KAAP;AANsB;AAOvB;;AAEY,EAAA,UAAU,CAAC,IAAD,EAAU;AAAA;;AAAA;AAC/B,YAAM,MAAM,SAAS,MAAI,CAAC,KAAL,CAAW,IAAX,CACnB,MAAI,CAAC,UADc,EAEnB,MAAI,CAAC,aAAL,CAAmB,IAAnB,CAFmB,EAGnB,MAAI,CAAC,WAHc,EAInB,SAJmB,EAArB;AAKA,aAAO,MAAI,CAAC,iBAAL,CAAuB,MAAvB,CAAP;AAN+B;AAOhC;;AACY,EAAA,QAAQ,CAAC,IAAD,EAAU;AAAA;;AAAA;AAC7B,YAAM,MAAI,CAAC,KAAL,CAAW,GAAX,CACJ,MAAI,CAAC,UADD,EAEJ,MAAI,CAAC,aAAL,CAAmB,IAAnB,CAFI,EAEsB,SAFtB,EAAN;AAD6B;AAI9B;;AArDsB;;;mBAAZ,Y,EAAY,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,C;AAAA,C;;;SAAZ,Y;AAAY,EAAA,OAAA,EAAZ,YAAY,CAAA,I;AAAA,EAAA,UAAA,EAJX","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n\nimport { mainEndpoint, getFechaForQuery } from './utils';\n@Injectable({\n  providedIn: 'root'\n})\n\n\nexport class HoursService {\n  private urlApiHour = mainEndpoint + '/stock-pwfe/personaHorarioAgenda';\n  public hours: Array<any> = [];\n\n  private httpOptions: object  = {\n    headers: new HttpHeaders({\n      'Content-Type':  'application/json',\n      'usuario': 'usuario2'\n    })\n  \n  };\n  constructor(private _http: HttpClient) {}\n\n  private newHourFromServer(h: any) {\n    return {\n      id: h.idEmpleado.idPersona,\n      day: h.dia,\n      hourOpen: h.horaAperturaCadena,\n      hourClose: h.horaCierreCadena,\n      interval: h.intervaloMinutos,\n    }\n  }\n  private newHourToSend(h: any): any {\n    return {\n      idEmpleado:{ idPersona: h.id},\n      dia: h.day,\n      horaAperturaCadena: h.hourOpen,\n      horaCierreCadena: h.hourClose,\n      intervaloMinutos: h.interval\n    }\n  }\n\n  public async getAllHours(): Promise<any[]> {\n    const { lista } = await this._http.get<any>(this.urlApiHour).toPromise();\n    const hours= lista.map((h: any) => this.newHourFromServer(h));\n \n    console.log('hours:', hours);\n    this.hours = hours;\n    return hours;\n  }\n\n  public async createHour(hour: any): Promise<any> {\n    const result = await this._http.post<any>(\n      this.urlApiHour,\n      this.newHourToSend(hour),\n      this.httpOptions\n    ).toPromise();\n    return this.newHourFromServer(result);\n  }\n  public async editHour(hour: any): Promise<any> {\n    await this._http.put<any>(\n      this.urlApiHour,\n      this.newHourToSend(hour)).toPromise();\n  }\n\n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}