{"ast":null,"code":"import _asyncToGenerator from \"/home/seo/Desktop/primer-parcial-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { EventEmitter } from '@angular/core';\nimport { getFechaForQuery } from 'src/app/services/utils';\nimport { Workbook } from 'exceljs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/factura.service\";\nimport * as i2 from \"../includes/full-page-modal/full-page-modal.component\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../includes/back-modal/back-modal.component\";\n\nfunction RegistrarFacturaComponent_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ficha_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", ficha_r3.idFichaClinica);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" id: \", ficha_r3.idFichaClinica, \" - \", ficha_r3.motivoConsulta, \" \");\n  }\n}\n\nfunction RegistrarFacturaComponent_tr_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const service_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"id: \", service_r4.idServicio, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(service_r4.fechaHora);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", service_r4.idEmpleado.idPersona, \" - \", service_r4.idEmpleado.nombre, \" \", service_r4.idEmpleado.apellido, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", service_r4.idFichaClinica.idCliente.idPersona, \" - \", service_r4.idFichaClinica.idCliente.nombre, \" \", service_r4.idFichaClinica.idCliente.apellido, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(service_r4.presupuesto);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", service_r4.idFichaClinica.idTipoProducto.idCategoria.descripcion, \" \");\n  }\n}\n\nfunction RegistrarFacturaComponent_button_51_i_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 24);\n  }\n}\n\nfunction RegistrarFacturaComponent_button_51_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function RegistrarFacturaComponent_button_51_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const product_r5 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.selectedService = product_r5;\n    });\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, RegistrarFacturaComponent_button_51_i_3_Template, 1, 0, \"i\", 23);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.selectedService === product_r5 ? \"bg-grey-e\" : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", product_r5.idProducto, \" - \", product_r5.descripcionGeneral, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedService === product_r5);\n  }\n}\n\nexport class RegistrarFacturaComponent {\n  constructor(_service) {\n    this._service = _service;\n    this.showAddModal = false;\n    this.editingModal = false;\n    this.selectedReport = {};\n    this.services = [];\n    this.fichas = [];\n    this.workbook = new Workbook();\n    this.products = [];\n    this.selectedService = null;\n    this.selectedFichaId = 0;\n    this.back = new EventEmitter();\n    this.clearSelectedReport();\n    const fecha = getFechaForQuery(new Date(new Date().valueOf() - 1000 * 60 * 60 * 24));\n    this.fechaDesde = `${fecha.substr(0, 4)}-${fecha.substr(4, 2)}-${fecha.substr(6)}`;\n    this.fechaHasta = `${fecha.substr(0, 4)}-${fecha.substr(4, 2)}-${fecha.substr(6)}`;\n    this.idPatient = \"\";\n    this.idFisioterapeuta = \"\";\n    this.obs = \"\";\n    this.idServicio = 0;\n  }\n\n  clearSelectedService() {\n    this.selectedService = null;\n  }\n\n  clearSelectedReport() {\n    this.selectedReport = {\n      id: '',\n      name: '',\n      lastName: '',\n      email: '',\n      phone: '',\n      document: '',\n      type: 'FISICA',\n      birthday: ''\n    };\n  }\n\n  showNewClientModal() {\n    this.clearSelectedReport();\n    this.editingModal = false;\n    this.showAddModal = true;\n  }\n\n  showEditModal(report) {\n    this.clearSelectedReport = report;\n    this.showAddModal = true;\n    this.editingModal = true;\n  }\n\n  get isValidSelectedDoctor() {\n    return !!this.selectedReport && !!this.selectedReport.name && !!this.selectedReport.lastName && !!this.selectedReport.document && !!this.selectedReport.phone && !!this.selectedReport.type && !!this.selectedReport.birthday;\n  }\n\n  loadService() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.services = yield _this._service.getAllDetailService();\n    })();\n  }\n\n  loadServicesFromServer() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.products = yield _this2._service.getAllProducts();\n      console.log(_this2.products);\n    })();\n  }\n\n  ngOnInit() {\n    this.loadService();\n    this.getAllFicha();\n    this.loadServicesFromServer();\n    this.clearSelectedService();\n  }\n\n  getServiceFromTo() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.services = yield _this3._service.getServiceFromTo(_this3.fechaDesde, _this3.fechaHasta);\n    })();\n  }\n\n  getServiceByPatientId() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.services = yield _this4._service.getServiceByPatientId(_this4.idPatient);\n    })();\n  }\n\n  getServiceByFisioId() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      _this5.services = yield _this5._service.getServiceByFisioId(_this5.idFisioterapeuta);\n    })();\n  }\n\n  getDetailServiceById() {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      _this6.services = yield _this6._service.getDetailServiceById(_this6.idServicio);\n    })();\n  }\n\n  getAllFicha() {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      _this7.fichas = yield _this7._service.getAllFicha();\n    })();\n  }\n\n  get isValidSelectedService() {\n    return true;\n  }\n\n  confirmAction() {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      // Create new service\n      yield _this8.createDetalle();\n    })();\n  }\n\n  createService() {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      _this9.showAddModal = true;\n      const newService = yield _this9._service.createFacturaCabecera(_this9.obs, _this9.selectedFichaId);\n      _this9.services = _this9.services.concat(newService);\n      console.log(newService);\n      _this9.idServicio = newService.idServicio; //this.clearSelectedService();\n      //this.showAddModal = false;\n    })();\n  }\n\n  createDetalle() {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      _this10.showAddModal = false;\n      console.log(_this10.selectedService);\n      const newService = yield _this10._service.createFacturaDetalle(1, _this10.selectedService.idTipoProducto.idTipoProducto, _this10.idServicio);\n      console.log(newService);\n    })();\n  }\n\n}\n\nRegistrarFacturaComponent.ɵfac = function RegistrarFacturaComponent_Factory(t) {\n  return new (t || RegistrarFacturaComponent)(i0.ɵɵdirectiveInject(i1.FacturaService));\n};\n\nRegistrarFacturaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistrarFacturaComponent,\n  selectors: [[\"app-registrar-factura\"]],\n  outputs: {\n    back: \"back\"\n  },\n  decls: 52,\n  vars: 16,\n  consts: [[\"title\", \"Registro de servicios para facturar a los pacientes\", 2, \"width\", \"700px\", 3, \"back\"], [1, \"container\", 2, \"width\", \"700px\"], [3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"ngDefaultControl\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"p-10\", \"text-white\", \"br-4\", \"bg-primary\", 3, \"click\"], [\"ngDefaultControl\", \"\", \"type\", \"date\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-5\"], [\"ngDefaultControl\", \"\", \"title\", \"Ingrese el id del paciente\", \"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"title\", \"Ingrese el id del fisioterapeuta\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"row\"], [\"id\", \"htmlData\"], [1, \"table\", \"table-bordered\", \"mt-4\"], [4, \"ngFor\", \"ngForOf\"], [\"ngDefaultControl\", \"\", 3, \"title\", \"ngModel\", \"canConfirm\", \"confirmButtonText\", \"ngModelChange\", \"confirmed\"], [\"ngDefaultControl\", \"\", \"title\", \"Id Ficha\", \"readonly\", \"\", 3, \"value\"], [\"ngDefaultControl\", \"\", \"title\", \"Observaci\\u00F3n\", \"readonly\", \"\", 3, \"value\"], [\"ngDefaultControl\", \"\", \"title\", \"idServicio\", \"readonly\", \"\", 3, \"value\"], [1, \"p-v-10\", \"column\", 2, \"max-height\", \"200px\", \"overflow\", \"auto\"], [1, \"text-grey-7\", \"fs-12\", \"mb-15\", \"p-h-5\"], [\"class\", \"p-10 border-1 br-4 mb-5 text-left row justify-between\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"p-10\", \"border-1\", \"br-4\", \"mb-5\", \"text-left\", \"row\", \"justify-between\", 3, \"ngClass\", \"click\"], [\"class\", \"fas fa-check\", 4, \"ngIf\"], [1, \"fas\", \"fa-check\"]],\n  template: function RegistrarFacturaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"full-page-modal\", 0);\n      i0.ɵɵlistener(\"back\", function RegistrarFacturaComponent_Template_full_page_modal_back_0_listener() {\n        return ctx.back.emit();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵtext(2, \" Seleccione Ficha : \");\n      i0.ɵɵelementStart(3, \"select\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrarFacturaComponent_Template_select_ngModelChange_3_listener($event) {\n        return ctx.selectedFichaId = $event;\n      });\n      i0.ɵɵtemplate(4, RegistrarFacturaComponent_option_4_Template, 2, 3, \"option\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"br\");\n      i0.ɵɵtext(6, \" Observaci\\u00F3n: \");\n      i0.ɵɵelementStart(7, \"textarea\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrarFacturaComponent_Template_textarea_ngModelChange_7_listener($event) {\n        return ctx.obs = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"br\");\n      i0.ɵɵelement(9, \"br\");\n      i0.ɵɵelementStart(10, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function RegistrarFacturaComponent_Template_button_click_10_listener() {\n        return ctx.createService();\n      });\n      i0.ɵɵtext(11, \"Crear Factura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"br\");\n      i0.ɵɵelement(13, \"br\");\n      i0.ɵɵtext(14, \" Fecha desde: \");\n      i0.ɵɵelementStart(15, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrarFacturaComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.fechaDesde = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \" Fecha hasta: \");\n      i0.ɵɵelementStart(17, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrarFacturaComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.fechaHasta = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function RegistrarFacturaComponent_Template_button_click_18_listener() {\n        return ctx.getServiceFromTo();\n      });\n      i0.ɵɵtext(19, \"Filtrar por fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"br\");\n      i0.ɵɵelement(21, \"br\");\n      i0.ɵɵelementStart(22, \"div\", 7);\n      i0.ɵɵtext(23, \" ID Paciente: \");\n      i0.ɵɵelementStart(24, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrarFacturaComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.idPatient = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function RegistrarFacturaComponent_Template_button_click_25_listener() {\n        return ctx.getServiceByPatientId();\n      });\n      i0.ɵɵtext(26, \"Filtrar por id Paciente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"br\");\n      i0.ɵɵelementStart(28, \"div\", 7);\n      i0.ɵɵtext(29, \" ID Fisioterapeuta: \");\n      i0.ɵɵelementStart(30, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrarFacturaComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.idFisioterapeuta = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function RegistrarFacturaComponent_Template_button_click_31_listener() {\n        return ctx.getServiceByFisioId();\n      });\n      i0.ɵɵtext(32, \"Filtrar por id de Fisioterapeuta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"br\");\n      i0.ɵɵelementStart(34, \"div\", 10);\n      i0.ɵɵelementStart(35, \"div\", 11);\n      i0.ɵɵelementStart(36, \"table\", 12);\n      i0.ɵɵtemplate(37, RegistrarFacturaComponent_tr_37_Template, 13, 10, \"tr\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"back-modal\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrarFacturaComponent_Template_back_modal_ngModelChange_38_listener($event) {\n        return ctx.showAddModal = $event;\n      })(\"confirmed\", function RegistrarFacturaComponent_Template_back_modal_confirmed_38_listener() {\n        return ctx.createDetalle();\n      });\n      i0.ɵɵtext(39, \" ID FichaClinica: \");\n      i0.ɵɵelement(40, \"input\", 15);\n      i0.ɵɵelement(41, \"br\");\n      i0.ɵɵtext(42, \" Observaci\\u00F3n: \");\n      i0.ɵɵelement(43, \"input\", 16);\n      i0.ɵɵelement(44, \"br\");\n      i0.ɵɵtext(45, \" idServicio: \");\n      i0.ɵɵelement(46, \"input\", 17);\n      i0.ɵɵelement(47, \"br\");\n      i0.ɵɵelementStart(48, \"div\", 18);\n      i0.ɵɵelementStart(49, \"div\", 19);\n      i0.ɵɵtext(50, \" Seleccionar producto \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(51, RegistrarFacturaComponent_button_51_Template, 4, 4, \"button\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedFichaId);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.fichas);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.obs);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.fechaDesde);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.fechaHasta);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.idPatient);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.idFisioterapeuta);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.services);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", \"Nueva factura\")(\"ngModel\", ctx.showAddModal)(\"canConfirm\", ctx.isValidSelectedService)(\"confirmButtonText\", \"Crear factura\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.selectedFichaId);\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.obs);\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.idServicio);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  directives: [i2.FullPageModalComponent, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, i4.NgForOf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i5.BackModalComponent, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i4.NgClass, i4.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3RyYXItZmFjdHVyYS5jb21wb25lbnQuY3NzIn0= */\", \"table[_ngcontent-%COMP%] {\\n        border-collapse: collapse;\\n        width: 100%;\\n    }\\n  \\n    td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n        border: 1px solid #dddddd;\\n        text-align: left;\\n        padding: 8px;\\n    }\\n  \\n    tr[_ngcontent-%COMP%]:nth-child(even) {\\n        background-color: #dddddd;\\n    }\\n    input[type=text][_ngcontent-%COMP%]  {\\n    width: 10%;\\n    padding: 12px 20px;\\n    margin: 8px 0;\\n    box-sizing: border-box;\\n    background-color: #F9F9F9;\\n  }\\n    input[type=number][_ngcontent-%COMP%]  {\\n    width: 10%;\\n    padding: 12px 20px;\\n    margin: 8px 0;\\n    box-sizing: border-box;\\n    background-color: #F9F9F9;\\n  }\\n  input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%] {\\n   background: silver;\\n   border: 1px solid #393939;\\n   border-radius: 5px 5px 5px 5px;\\n   color: #393939;\\n   font-size: 12px;\\n   padding: 5px;\\n}\"]\n});","map":{"version":3,"sources":["/home/seo/Desktop/primer-parcial-frontend/src/app/components/factura/registrar-factura.component.ts","/home/seo/Desktop/primer-parcial-frontend/src/app/components/factura/registrar-factura.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { ReportService } from 'src/app/services/reports.service';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { getFechaForQuery } from 'src/app/services/utils';\nimport { Workbook } from 'exceljs';\n\nimport * as fs from 'file-saver';\nimport { FacturaService } from 'src/app/services/factura.service';\n\n@Component({\n  selector: 'app-registrar-factura',\n  templateUrl: './registrar-factura.component.html',\n  styleUrls: ['./registrar-factura.component.css']\n})\n\nexport class RegistrarFacturaComponent implements OnInit {\n  public showAddModal: boolean = false;\n  public editingModal: boolean = false;\n  public selectedReport: any = {};\n  public services: Array<any> = [];\n  public fichas: Array<any> = [];\n  public fechaDesde: string;\n  public idPatient: string;\n  public idFisioterapeuta: string;\n  public idServicio: number;\n  public fechaHasta: string;\n  public workbook = new Workbook();\n  public products: Array<any> = [];\n  public selectedService: any = null;\n\n  public selectedFichaId: number = 0;\n  public obs: string;\n\n  \n\n  clearSelectedService() {\n    this.selectedService = null;\n  }\n  \n    \n  @Output() back = new EventEmitter();\n  constructor(private _service: FacturaService) {\n    this.clearSelectedReport();\n    const fecha:string = getFechaForQuery( new Date((new Date()).valueOf() - 1000*60*60*24));\n    this.fechaDesde = `${fecha.substr(0,4)}-${fecha.substr(4,2)}-${fecha.substr(6)}`;\n    this.fechaHasta = `${fecha.substr(0,4)}-${fecha.substr(4,2)}-${fecha.substr(6)}`;\n    this.idPatient = \"\";\n    this.idFisioterapeuta = \"\";\n    this.obs = \"\";\n    this.idServicio = 0;\n\n  }\n  clearSelectedReport() {\n    this.selectedReport = {\n      id: '',\n      name: '',\n      lastName: '',\n      email: '',\n      phone: '',\n      document: '',\n      type: 'FISICA',\n      birthday: '',\n    };\n  }\n  showNewClientModal() {\n    this.clearSelectedReport();\n    this.editingModal = false;\n    this.showAddModal = true;\n  }\n\n  showEditModal(report: any) {\n    this.clearSelectedReport = report;\n    this.showAddModal = true;\n    this.editingModal = true;\n  }\n\n  public get isValidSelectedDoctor(): boolean {\n    return !!this.selectedReport &&\n      !!this.selectedReport.name &&\n      !!this.selectedReport.lastName &&\n      !!this.selectedReport.document &&\n      !!this.selectedReport.phone &&\n      !!this.selectedReport.type &&\n      !!this.selectedReport.birthday;\n  }\n  async loadService() {\n    this.services = await this._service.getAllDetailService();\n  }\n\n  async loadServicesFromServer() {\n\n    this.products = await this._service.getAllProducts();\n    console.log(this.products);\n  }\n  ngOnInit(): void {\n    this.loadService();\n\n    this.getAllFicha();\n    this.loadServicesFromServer();\n    this.clearSelectedService();\n    \n  }\n  async getServiceFromTo(){\n    this.services = await this._service.getServiceFromTo( this.fechaDesde, this.fechaHasta);  \n  }\n  async getServiceByPatientId(){\n    this.services = await this._service.getServiceByPatientId( this.idPatient);  \n  }\n  async getServiceByFisioId(){\n    this.services = await this._service.getServiceByFisioId( this.idFisioterapeuta);  \n  }\n  async getDetailServiceById(){\n    this.services = await this._service.getDetailServiceById( this.idServicio);  \n  }\n  async getAllFicha(){\n    this.fichas = await this._service.getAllFicha();  \n  }\n  public get isValidSelectedService(): boolean {\n    return true;\n  }\n  async confirmAction() {\n\n    // Create new service\n    await this.createDetalle();\n  }\n\n  async createService() {\n    this.showAddModal=true\n    const newService = await this._service.createFacturaCabecera(this.obs, this.selectedFichaId );\n    this.services = this.services.concat(newService);\n    console.log(newService);\n    this.idServicio = newService.idServicio;\n    //this.clearSelectedService();\n    //this.showAddModal = false;\n  }\n  async createDetalle() {\n    this.showAddModal=false\n    console.log(this.selectedService);\n    const newService = await this._service.createFacturaDetalle(1, this.selectedService.idTipoProducto.idTipoProducto,this.idServicio );\n    console.log(newService);\n  }\n\n\n}","<style>\n    table {\n        border-collapse: collapse;\n        width: 100%;\n    }\n  \n    td, th {\n        border: 1px solid #dddddd;\n        text-align: left;\n        padding: 8px;\n    }\n  \n    tr:nth-child(even) {\n        background-color: #dddddd;\n    }\n    input[type=text]  {\n    width: 10%;\n    padding: 12px 20px;\n    margin: 8px 0;\n    box-sizing: border-box;\n    background-color: #F9F9F9;\n  }\n    input[type=number]  {\n    width: 10%;\n    padding: 12px 20px;\n    margin: 8px 0;\n    box-sizing: border-box;\n    background-color: #F9F9F9;\n  }\n  input, select, textarea {\n   background: silver;\n   border: 1px solid #393939;\n   border-radius: 5px 5px 5px 5px;\n   color: #393939;\n   font-size: 12px;\n   padding: 5px;\n}\n  </style>\n  \n  \n  \n  <full-page-modal title=\"Registro de servicios para facturar a los pacientes\"  style=\"width: 700px;\" (back)=\"back.emit()\">\n  \n  \n      <div class=\"container\" style=\"width: 700px;\">\n        Seleccione Ficha : <select [(ngModel)]=\"selectedFichaId\">\n          <option *ngFor=\"let ficha of fichas\" [value]=\"ficha.idFichaClinica\">\n              id: {{ficha.idFichaClinica}} - {{ficha.motivoConsulta}} \n          </option>\n      </select>\n      <br>\n      Observación: <textarea ngDefaultControl [(ngModel)]=\"obs\"></textarea><br>\n      <br>\n\n      <button class=\"p-10 text-white br-4 bg-primary\" (click)=\"createService()\">Crear Factura</button>\n      <br>\n      <br>\n\n        Fecha desde: <input ngDefaultControl type=\"date\" [(ngModel)]=\"fechaDesde\"/>\n        Fecha hasta: <input ngDefaultControl type=\"date\" [(ngModel)]=\"fechaHasta\"/>\n        <button class=\"p-10 text-white br-4 bg-primary\" (click)=\"getServiceFromTo()\">Filtrar por fecha</button>\n        <br/><br/>\n  \n        <div class=\"col-5\">\n          ID Paciente: <input\n            ngDefaultControl \n            title=\"Ingrese el id del paciente\" \n            type=\"text\"\n            [(ngModel)]=\"idPatient\"/>\n          <button class=\"p-10 text-white br-4 bg-primary\" (click)=\"getServiceByPatientId()\">Filtrar por id Paciente</button>\n        </div>\n        \n        <br>\n        <div class=\"col-5\">\n          ID Fisioterapeuta: <input \n          class=\"form-control\"\n          type=\"number\" \n          title=\"Ingrese el id del fisioterapeuta\" \n          [(ngModel)]=\"idFisioterapeuta\" />\n          <button class=\"p-10 text-white br-4 bg-primary\" (click)=\"getServiceByFisioId()\">Filtrar por id de Fisioterapeuta</button>\n        </div>\n        \n        <br>\n  \n  \n        <div class=\"row\">\n            <div id=\"htmlData\">\n      \n              <table class=\"table table-bordered mt-4\">\n                <!--<tr >\n                  <th>Fecha del servicio</th>\n                  <th>Fisioterapeuta</th>\n                  <th>Paciente</th>\n                  <th>Presupuesto</th>\n                  <th>Subcategoría</th>\n                </tr>-->\n            \n                <tr *ngFor=\"let service of services\">\n                  <td>id: {{service.idServicio}}</td>\n                  <td>{{service.fechaHora}}</td>\n                  <td>{{service.idEmpleado.idPersona}} - {{service.idEmpleado.nombre}} {{service.idEmpleado.apellido}}</td>\n                  <td>{{service.idFichaClinica.idCliente.idPersona}} - {{service.idFichaClinica.idCliente.nombre}} {{service.idFichaClinica.idCliente.apellido}}</td>\n                  <td>{{service.presupuesto}}</td>\n                  <td>{{service.idFichaClinica.idTipoProducto.idCategoria.descripcion}} </td>\n              </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n        \n  \n    <!-- NEW SERVICE MODAL -->\n\n    <back-modal \n        ngDefaultControl\n        [title]=\"'Nueva factura'\"\n        [(ngModel)]=\"showAddModal\"\n        [canConfirm]=\"isValidSelectedService\"\n        [confirmButtonText]=\"'Crear factura'\"\n        (confirmed)=\"createDetalle()\"\n    >\n        <!-- NEW SERVICE CODE -->\n        ID FichaClinica: <input \n            ngDefaultControl \n            title=\"Id Ficha\" \n            value=\"{{selectedFichaId}}\"\n            readonly\n            />\n            <br>  \n        <!-- NEW SERVICE NAME -->\n        Observación: <input \n        ngDefaultControl \n        title=\"Observación\" \n        value=\"{{obs}}\"\n        readonly\n        /><br>\n        <!-- NEW SERVICE PRICE -->\n        idServicio: <input \n        ngDefaultControl \n        title=\"idServicio\" \n        value=\"{{idServicio}}\"\n        readonly\n        /><br>\n        <!-- PRODUCT LIST (SELECTOR) -->\n        <div class=\"p-v-10 column\" style=\"max-height:200px;overflow:auto\">\n            <div class=\"text-grey-7 fs-12 mb-15 p-h-5\">\n                Seleccionar producto\n            </div>\n            <!-- PRODUCT LIST ITEMS -->\n            <button *ngFor=\"let product of products\" \n                class=\"p-10 border-1 br-4 mb-5 text-left row justify-between\"\n                [ngClass]=\"selectedService===product?'bg-grey-e':''\"\n                (click)=\"selectedService=product\"\n            >\n                <div>{{product.idProducto}} - {{product.descripcionGeneral}}</div>\n                <i *ngIf=\"selectedService===product\" class=\"fas fa-check\"></i>\n            </button>\n        </div>\n\n    </back-modal>\n\n  \n  </full-page-modal>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}